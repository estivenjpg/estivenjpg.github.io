<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>¬°Feliz Cumplea√±os!</title>
  <style>
    :root{
      --bg: linear-gradient(135deg,#fef6e4 0%, #fff6fb 50%, #e8faff 100%);
      --accent: #ff6b6b;
      --accent2: #ffd166;
      --text: #2b2b2b;
    }
    html,body{height:100%;margin:0;font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;background:var(--bg);color:var(--text)}
    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:30px;
      box-sizing:border-box;
    }
    .card{
      width:min(950px,96%);
      background:rgba(255,255,255,0.9);
      border-radius:18px;
      box-shadow: 0 12px 40px rgba(20,30,60,0.12);
      overflow:hidden;
      position:relative;
      padding:28px;
    }

    header{
      display:flex;gap:20px;align-items:center;
    }
    .title{
      font-size:clamp(28px,4.2vw,46px);
      font-weight:800;
      letter-spacing: -0.02em;
      display:flex;flex-direction:column;
      line-height:1;
    }
    .title small{font-weight:600;font-size:0.45em;color:#7a7a7a;margin-top:6px}

    /* balloons left/right */
    .balloons{
      position:absolute;inset:0;pointer-events:none;
    }
    .balloon{
      position:absolute;
      bottom: -10%;
      transform-origin:50% 50%;
      animation: float 6s ease-in-out infinite;
      opacity:0.95;
    }
    .balloon:nth-child(1){left:6%; animation-duration:5.8s}
    .balloon:nth-child(2){left:16%; animation-duration:6.4s; animation-delay:0.3s}
    .balloon:nth-child(3){right:10%; animation-duration:5.6s; animation-delay:0.6s}
    .balloon:nth-child(4){right:18%; animation-duration:7s; animation-delay:0.2s}
    .balloon svg{width:70px;height:auto;display:block}

    @keyframes float{
      0%{transform: translateY(0) rotate(-3deg)}
      50%{transform: translateY(-40px) rotate(6deg)}
      100%{transform: translateY(0) rotate(-3deg)}
    }

    .content{
      display:flex;gap:24px;align-items:center;flex-wrap:wrap; margin-top:18px;
    }
    .left{
      flex:1 1 380px;
      padding:18px;
    }
    .right{
      flex:1 1 380px;
      padding:18px;
      display:flex;align-items:center;justify-content:center;
    }

    /* Cake */
    .cake{
      width:320px; max-width:90%;
      text-align:center;
    }
    .cake .tier{
      margin:0 auto;
      background:linear-gradient(180deg,#fff 0%, #ffeeda 100%);
      border-radius:12px;
      box-shadow:0 6px 18px rgba(20,30,50,0.08);
      height:60px;width:260px;position:relative;
    }
    .cake .tier.top{height:46px;width:200px;margin-bottom:-10px}
    .frost{
      position:absolute;left:0;right:0;top:6px;height:18px;background:linear-gradient(90deg,var(--accent2),#fff);border-radius:8px 8px 0 0;
    }
    .sprinkles{
      position:absolute;left:12px;right:12px;top:10px;height:6px;
      background-image: linear-gradient(90deg, transparent 10%, rgba(0,0,0,0.04) 10%);
      background-size:6px 6px;
      opacity:0.6;border-radius:4px;
    }
    .candles{display:flex;gap:8px;justify-content:center;margin-top:10px}
    .candle{
      width:10px;height:28px;border-radius:3px;background:linear-gradient(180deg,#fff,#ffd7d7);
      position:relative;box-shadow:0 2px 6px rgba(0,0,0,0.12);
      display:flex;align-items:flex-start;justify-content:center;
      transform-origin:center bottom;
      animation: sway 3s ease-in-out infinite;
    }
    .candle:nth-child(odd){animation-duration:2.8s}
    .candle:before{
      content:"";position:absolute;top:-12px;width:6px;height:12px;background:linear-gradient(180deg,#fffdc2,#ffd166);border-radius:8px 8px 2px 2px;
      box-shadow:0 1px 4px rgba(0,0,0,0.12);
    }
    .flame{
      width:6px;height:8px;border-radius:50% 50% 50% 50%;position:absolute;top:-20px;
      background: radial-gradient(circle at 40% 30%, #fff 0%, transparent 30%),
                  linear-gradient(180deg,#ffd93b,#ff7a00);
      filter: drop-shadow(0 2px 6px rgba(255,150,0,0.5));
      animation: flicker 0.15s infinite;
    }
    @keyframes flicker{
      0%{transform:translateY(0) scaleY(1)}
      50%{transform:translateY(1px) scaleY(1.05)}
      100%{transform:translateY(0) scaleY(1)}
    }
    @keyframes sway{
      0%{transform:rotate(-1deg)}
      50%{transform:rotate(2deg)}
      100%{transform:rotate(-1deg)}
    }

    /* message and buttons */
    .message{
      margin-top:12px;font-size:1.05rem;
      background:linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
      padding:14px;border-radius:12px;
    }
    .controls{margin-top:14px;display:flex;gap:12px;flex-wrap:wrap}
    button{
      border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;
      box-shadow:0 6px 14px rgba(0,0,0,0.08);
      background:linear-gradient(180deg,var(--accent),#ff8b8b);color:white;
    }
    button.secondary{background:linear-gradient(180deg,#e6e6e6,#d9d9d9);color:#2b2b2b}

    /* confetti canvas covers whole card */
    #confettiCanvas{
      position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;
    }

    footer{margin-top:18px;font-size:0.9rem;color:#666;text-align:center}
    @media (max-width:720px){
      .content{flex-direction:column-reverse}
      .balloon svg{width:56px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <canvas id="confettiCanvas"></canvas>

      <div class="balloons" aria-hidden="true">
        <!-- simple SVG balloons -->
        <div class="balloon" style="--c:#ff6b6b">
          <svg viewBox="0 0 64 96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <ellipse cx="32" cy="32" rx="24" ry="28" fill="#ff6b6b"/>
            <path d="M30 60 L36 74 L28 74 Z" fill="#c44"/>
            <line x1="32" y1="60" x2="32" y2="86" stroke="#d7d7d7" stroke-width="1.5"/>
          </svg>
        </div>
        <div class="balloon" style="--c:#ffd166">
          <svg viewBox="0 0 64 96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <ellipse cx="32" cy="32" rx="22" ry="28" fill="#ffd166"/>
            <path d="M30 60 L36 74 L28 74 Z" fill="#d4a400"/>
            <line x1="32" y1="60" x2="32" y2="86" stroke="#f0e9c8" stroke-width="1.5"/>
          </svg>
        </div>
        <div class="balloon" style="--c:#6bc4ff">
          <svg viewBox="0 0 64 96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <ellipse cx="32" cy="32" rx="24" ry="28" fill="#6bc4ff"/>
            <path d="M30 60 L36 74 L28 74 Z" fill="#3b9bd6"/>
            <line x1="32" y1="60" x2="32" y2="86" stroke="#dff4ff" stroke-width="1.5"/>
          </svg>
        </div>
        <div class="balloon" style="--c:#c39eff">
          <svg viewBox="0 0 64 96" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <ellipse cx="32" cy="32" rx="20" ry="28" fill="#c39eff"/>
            <path d="M30 60 L36 74 L28 74 Z" fill="#8a5fd6"/>
            <line x1="32" y1="60" x2="32" y2="86" stroke="#efe6ff" stroke-width="1.5"/>
          </svg>
        </div>
      </div>

      <header>
        <div class="title" id="title">
          <div>üéâ ¬°Feliz Cumplea√±os! üéÇ</div>
          <small>Que te la pases muy bien en tu dia, te aprecio mucho, tqm <3 .</small>
        </div>
        <div style="margin-left:auto;text-align:right;">
          <div style="font-weight:700;font-size:0.95rem">Para: <span id="nombre">Rosy</span></div>
          <div style="color:#8a8a8a;margin-top:6px">Fecha: <span id="fecha"></span></div>
        </div>
      </header>

      <div class="content">
        <div class="left" aria-live="polite">
          <div class="message" id="mensaje">
            ¬°Que tu dia brille tanto como lo haces tu siepre! que cada uno de tus deseo se conviertan en realidad, te mereces todo lo bueno que existe, hoy celebramoslo increible que eres
			
          </div>

          <div class="controls">
            <button id="singBtn" aria-pressed="false">üéµ ¬°Cantar!</button>
			<audio id="CUMPLEA√ëOS" src ="jazz-trio.mp3" preload="auto"></audio>
            <button id="confettiBtn" class="secondary">üéä Confeti</button>
            <button id="customBtn" class="secondary">‚úèÔ∏è Personalizar nombre</button>
          </div>
        </div>

        <div class="right">
          <div class="cake" aria-hidden="false">
            <div class="tier top">
              <div class="frost"></div>
              <div class="sprinkles"></div>
            </div>
            <div class="tier">
              <div class="frost" style="top:8px"></div>
              <div class="sprinkles"></div>
            </div>

            <div class="candles" role="img" aria-label="Velas de cumplea√±os">
              <div class="candle"><div class="flame"></div></div>
              <div class="candle"><div class="flame"></div></div>
              <div class="candle"><div class="flame"></div></div>
              <div class="candle"><div class="flame"></div></div>
            </div>
          </div>
        </div>
      </div>

      <footer>
        FELIZ CUMPLEA√ëOS ‚ù§Ô∏è  ¬°Feliz d√≠a!
      </footer>
    </div>
  </div>

  <script>
    // show today's date
    document.getElementById('fecha').textContent = new Date().toLocaleDateString();

    // personalize name button
    document.getElementById('customBtn').addEventListener('click', () => {
      const name = prompt('Escribe el nombre del cumplea√±ero/a:', 'Estiven');
      if(name !== null){
        document.getElementById('nombre').textContent = name || '[Nombre]';
        document.getElementById('mensaje').textContent = `¬°Feliz cumplea√±os, ${name}! üéâ Que tengas un d√≠a espectacular.`;
      }
    });

    // confetti canvas
    const canvas = document.getElementById('confettiCanvas');
    const ctx = canvas.getContext('2d');
    let W, H;
    function resizeCanvas(){
      W = canvas.width = canvas.clientWidth;
      H = canvas.height = canvas.clientHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // simple confetti particles
    const particles = [];
    function spawnConfetti(amount=80){
      for(let i=0;i<amount;i++){
        particles.push({
          x: Math.random()*W,
          y: Math.random()*H*0.6,
          vx: Math.random()*6-3,
          vy: Math.random()*-4-2,
          size: Math.random()*8+4,
          color: ['#ff6b6b','#ffd166','#6bc4ff','#c39eff','#8be97b'][Math.floor(Math.random()*5)],
          rot: Math.random()*360,
          rotSpeed: Math.random()*10-5,
          life: Math.random()*80+80
        });
      }
    }

    function updateParticles(){
      ctx.clearRect(0,0,W,H);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.18; // gravity
        p.rot += p.rotSpeed;
        p.life--;
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.rot * Math.PI/180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
        ctx.restore();
        if(p.y > H+50 || p.life <=0) particles.splice(i,1);
      }
      requestAnimationFrame(updateParticles);
    }
    updateParticles();

    // confetti button
    document.getElementById('confettiBtn').addEventListener('click', () => {
      spawnConfetti(140);
    });

    // small WebAudio melody (simple happy birthday-ish fragment)
    let audioCtx;
    function playMelody(){
      if(!window.AudioContext && !window.webkitAudioContext) return;
      audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
      const now = audioCtx.currentTime;
      const master = audioCtx.createGain(); master.gain.value = 0.14; master.connect(audioCtx.destination);

      function tone(freq, start, dur){
        const o = audioCtx.createOscillator();
        o.type = 'sine';
        o.frequency.value = freq;
        const g = audioCtx.createGain();
        g.gain.setValueAtTime(0.0001, start);
        g.gain.exponentialRampToValueAtTime(1, start + 0.02);
        g.gain.exponentialRampToValueAtTime(0.0001, start + dur - 0.02);
        o.connect(g); g.connect(master);
        o.start(start); o.stop(start+dur);
      }

      // notes (freqs) for a short "feliz cumplea√±os" fragment (approx)
      const notes = [
        [264, 0, .32],[264, .36, .32],[297, .72, .64],[264, 1.44, .64],[352, 2.2, .64],[330, 3.0, 1.2]
      ];
      // trigger
      notes.forEach(n => tone(n[0], now + n[1], n[2]));
      // spawn confetti + candle flicker when singing
      spawnConfetti(200);
      flashFlames();
    }

    // candle flame flash effect (scale)
    function flashFlames(){
      const flames = document.querySelectorAll('.flame');
      flames.forEach((f,i) => {
        f.animate([
          {transform:'scale(1) translateY(0)'},
          {transform:'scale(1.25) translateY(-2px)'},
          {transform:'scale(1) translateY(0)'}
        ], {duration:600, delay: i*80});
      });
    }

    // sing button
    const singBtn = document.getElementById('singBtn');
    singBtn.addEventListener('click', async () => {
      // resume audio context on user gesture if needed
      try{
        if(audioCtx && audioCtx.state === 'suspended') await audioCtx.resume();
      }catch(e){}
      playMelody();
      singBtn.setAttribute('aria-pressed','true');
      singBtn.textContent = "üéµ ¬°Qu√© soples las velas!";
      setTimeout(()=>{ singBtn.setAttribute('aria-pressed','false'); singBtn.textContent='üéµ ¬°Cantar!'; }, 4200);
    });

    // autoplay confetti once shortly after load
    setTimeout(()=> spawnConfetti(60), 700);

    // keyboard accessibility: pressing Enter on card header triggers sing
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        playMelody();
      }
    });
  </script>
</body>
</html>